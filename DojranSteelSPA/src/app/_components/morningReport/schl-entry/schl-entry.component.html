<div class="container" style="margin-top: auto;">

        <form [formGroup]="entryForm">
          <form formArrayName="rows" class="well well-lg">

  <div class="table-responsive"  style="padding-bottom: 20px;">
    <!-- <div class="col-lg-4 col-md-6 col-sm-12"> -->
      <table style="width:100%;">
        <tr>
          <th>Date</th>
          <th>SAP Code</th>
          <th>Material Description</th>
          <th>Quantity in Pieces</th>
          <th>Quantity in Tons</th>
          <th>Available Time</th>
          <th>Budgeted Qunatity in PC</th>
        </tr>
        <!-- (ngSubmit)="eneterProduction()" -->
        <tr *ngFor="let item of no_rows.controls; let i=index" [formGroupName]="i">

          <td><input class="form-control" formControlName="date" type="text" bsDatepicker [bsConfig]="{ dateInputFormat: 'DD/MM/YYYY' }"></td>
                
          <td><div>{{item.value["sapCode"] || ""}}</div></td>

          <td><input formControlName="description" [typeahead]="schlatterProductsDescription" (typeaheadNoResults)="typeaheadNoResults($event, i)" (typeaheadOnSelect)="selectProduct(i)" class="form-control"
              [ngClass]="{'is-invalid': no_rows.get([i, 'noResult']).value}">

              <div class="invalid-feedback" *ngIf="no_rows.get([i, 'noResult']).value && no_rows.get([i, 'description']).touched">qunaityPc is required</div>
          </td>

        <td><input class="form-control" formControlName="qunatityPc"
          [ngClass]="{'is-invalid': no_rows.get([i, 'qunatityPc']).errors && no_rows.get([i, 'qunatityPc']).touched}">
              
          <div class="invalid-feedback" *ngIf="no_rows.get([i, 'qunatityPc']).touched && no_rows.get([i, 'qunatityPc']).hasError('required')">qunaityPc is required</div>
          <div class="invalid-feedback" *ngIf="no_rows.get([i, 'qunatityPc']).touched && no_rows.get([i, 'qunatityPc']).hasError('pattern')">Quantity in PC must be whole number</div>
        </td>

          <td><input class="form-control" formControlName="qunatityTn" [ngClass]="{'is-invalid': no_rows.get([i, 'qunatityTn']).errors && no_rows.get([i, 'qunatityTn']).touched}">
          <div class="invalid-feedback" *ngIf="no_rows.get([i, 'qunatityTn']).touched && no_rows.get([i, 'qunatityTn']).hasError('required')">qunaityTn is required</div>
          <div class="invalid-feedback" *ngIf="no_rows.get([i, 'qunatityTn']).touched && no_rows.get([i, 'qunatityTn']).hasError('pattern')">qunaityTn format is X.XXX</div>
        </td>

          <td><input class="form-control" formControlName="availableTime" (change)="calculateBD($event.target.value, i)" 
            [ngClass]="{'is-invalid': no_rows.get([i, 'availableTime']).errors && no_rows.get([i, 'availableTime']).touched}">
          <div class="invalid-feedback" *ngIf="no_rows.get([i, 'availableTime']).touched && no_rows.get([i, 'availableTime']).hasError('required')">Time is required</div>
          <div class="invalid-feedback" *ngIf="no_rows.get([i, 'availableTime']).touched && no_rows.get([i, 'availableTime']).hasError('pattern')">Available Time must be whole number</div>
        </td>

        <td><div>{{item.value["qunatityBd"] | number}}</div></td>
        <!-- <p>Form value: {{entryForm.get('rows').value | json}}</p> -->

      </tr>
      </table>

     
  </div>
          </form>
        </form>

        <button type="button" class="btn btn-primary" (click)="addRowClick()">Add Row</button>
</div>
<!-- <p>Form value: {{entryForm.value | json}}</p>
<p>Form status: {{entryForm.status | json}}</p>
<p>Form value: {{no_rows[1] | json}}</p> -->

